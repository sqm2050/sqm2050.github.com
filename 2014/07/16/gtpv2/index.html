
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>gtpv2 | sqm&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="SunQingmeng">
    
    <meta name="description" content="4.1 GTP Tunnel
一个GTP隧道由一个TEID，一个ip地址和一个udp端口号标识。
GTPv2实体通过下列IE获取隧道相关的控制信息：

Sender F-TEID for Control Plane IE

PGW S5/S8/S2a/ F-TEID for PMIP based i">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="sqm&#39;s Blog" title="sqm&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="sqm&#39;s Blog">sqm&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/16/gtpv2/" title="gtpv2" itemprop="url">gtpv2</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="SunQingmeng">SunQingmeng</a>
    </p>
  <p class="article-time">
    <time datetime="2014-07-16T09:58:47.000Z" itemprop="datePublished">7月 16 2014</time>
    更新日期:<time datetime="2014-08-04T03:46:17.000Z" itemprop="dateModified">8月 4 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1_GTP_Tunnel"><span class="toc-number">1.</span> <span class="toc-text">4.1 GTP Tunnel</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#S2a/S2b/S5/S8接口上的TEID-C"><span class="toc-number">1.1.</span> <span class="toc-text">S2a/S2b/S5/S8接口上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#S3/S16/S10接口上的TEID-C"><span class="toc-number">1.2.</span> <span class="toc-text">S3/S16/S10接口上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#S11/S4上的TEID-C"><span class="toc-number">1.3.</span> <span class="toc-text">S11/S4上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MBMS承载服务"><span class="toc-number">1.4.</span> <span class="toc-text">MBMS承载服务</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2_Protocol_stack"><span class="toc-number">2.</span> <span class="toc-text">4.2 Protocol stack</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-0_General"><span class="toc-number">2.1.</span> <span class="toc-text">4.2.0 General</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1_UDP_header_and_port_numbers"><span class="toc-number">2.2.</span> <span class="toc-text">4.2.1 UDP header and port numbers</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-1_Initial_Messages"><span class="toc-number">2.2.1.</span> <span class="toc-text">4.2.1.1 Initial Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-2_Triggered_Messages"><span class="toc-number">2.2.2.</span> <span class="toc-text">4.2.1.2 Triggered Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-3_Piggybacked_Messages"><span class="toc-number">2.2.3.</span> <span class="toc-text">4.2.1.3 Piggybacked Messages</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2_IP_header_and_IP_addresses"><span class="toc-number">2.3.</span> <span class="toc-text">4.2.2 IP header and IP addresses</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-1_Initial_Messages"><span class="toc-number">2.3.1.</span> <span class="toc-text">4.2.2.1 Initial Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-2_Triggered_Messages"><span class="toc-number">2.3.2.</span> <span class="toc-text">4.2.2.2 Triggered Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-3_Piggybacked_Messages"><span class="toc-number">2.3.3.</span> <span class="toc-text">4.2.2.3 Piggybacked Messages</span></a></li></ol></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#5-_GTP_Header_for_Control_Plane"><span class="toc-number"></span> <span class="toc-text">5. GTP Header for Control Plane</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1_General_format"><span class="toc-number">1.</span> <span class="toc-text">5.1 General format</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2_Control_Plane_GTP_Extension_Header"><span class="toc-number">2.</span> <span class="toc-text">5.2 Control Plane GTP Extension Header</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3_对于Echo_和Version不被支持的消息的GTP-C的头部"><span class="toc-number">3.</span> <span class="toc-text">5.3 对于Echo 和Version不被支持的消息的GTP-C的头部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4_EPC指定的GTP-C头部"><span class="toc-number">4.</span> <span class="toc-text">5.4 EPC指定的GTP-C头部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5_GTPv2-C头部的用法"><span class="toc-number">5.</span> <span class="toc-text">5.5 GTPv2-C头部的用法</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-2_TEID必须出现而且等于0的情形"><span class="toc-number">5.1.</span> <span class="toc-text">5.5.2 TEID必须出现而且等于0的情形</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6_Format_of_the_GTPv2-C_Message"><span class="toc-number">6.</span> <span class="toc-text">5.6 Format of the GTPv2-C Message</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#6-_GTP-C_Message_Types_and_Message_Formats"><span class="toc-number"></span> <span class="toc-text">6. GTP-C Message Types and Message Formats</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-0_Message_Type"><span class="toc-number">0.1.</span> <span class="toc-text">6.1.0 Message Type</span></a></li></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#7_GTP-C_messages"><span class="toc-number"></span> <span class="toc-text">7 GTP-C messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1_Patch_Management_Messages"><span class="toc-number">1.</span> <span class="toc-text">7.1 Patch Management Messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-0"><span class="toc-number">1.1.</span> <span class="toc-text">7.1.0</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2_Tunnel_Management_Messages"><span class="toc-number">2.</span> <span class="toc-text">7.2 Tunnel Management Messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1_Create_Session_Request"><span class="toc-number">2.1.</span> <span class="toc-text">7.2.1 Create Session Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2_Create_Session_Response"><span class="toc-number">2.2.</span> <span class="toc-text">7.2.2 Create Session Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3_Create_Bearer_Request"><span class="toc-number">2.3.</span> <span class="toc-text">7.2.3 Create Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4_Create_Bearer_Response"><span class="toc-number">2.4.</span> <span class="toc-text">7.2.4 Create Bearer Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-5_Bearer_Resource_Command"><span class="toc-number">2.5.</span> <span class="toc-text">7.2.5 Bearer Resource Command</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-6_Bearer_Resource_Failure_Indication"><span class="toc-number">2.6.</span> <span class="toc-text">7.2.6 Bearer Resource Failure Indication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-7_Modify_Bearer_Request"><span class="toc-number">2.7.</span> <span class="toc-text">7.2.7 Modify Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-8_Modify_Bearer_Response"><span class="toc-number">2.8.</span> <span class="toc-text">7.2.8 Modify Bearer Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-9-1_Delete_Session_Request"><span class="toc-number">2.8.1.</span> <span class="toc-text">7.2.9.1 Delete Session Request</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-9-2_Delete_Bearer_Request"><span class="toc-number">2.8.2.</span> <span class="toc-text">7.2.9.2 Delete Bearer Request</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-10-1_Delete_Session_Response"><span class="toc-number">2.8.3.</span> <span class="toc-text">7.2.10.1 Delete Session Response</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-10-2_Delete_Bearer_Response"><span class="toc-number">2.8.4.</span> <span class="toc-text">7.2.10.2 Delete Bearer Response</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-1_Downlink_Data_Notification"><span class="toc-number">2.8.5.</span> <span class="toc-text">7.2.11.1 Downlink Data Notification</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-2_Downlink_Data_Notification_Acknowledge"><span class="toc-number">2.8.6.</span> <span class="toc-text">7.2.11.2 Downlink Data Notification Acknowledge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-3_Downlink_Data_Notification_Failure_Indication"><span class="toc-number">2.8.7.</span> <span class="toc-text">7.2.11.3 Downlink Data Notification Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-12_Delete_Indirect_Data_Forwarding_Tunnel_Request"><span class="toc-number">2.9.</span> <span class="toc-text">7.2.12 Delete Indirect Data Forwarding Tunnel Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-13_Delete_Indirect_Data_Forwarding_Tunnel_Response"><span class="toc-number">2.10.</span> <span class="toc-text">7.2.13 Delete Indirect Data Forwarding Tunnel Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-14-1_Modify_Bearer_Command"><span class="toc-number">2.10.1.</span> <span class="toc-text">7.2.14.1 Modify Bearer Command</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-14-2_Modify_Bearer_Failure_Indication"><span class="toc-number">2.10.2.</span> <span class="toc-text">7.2.14.2 Modify Bearer Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-15_Update_Bearer_Request"><span class="toc-number">2.11.</span> <span class="toc-text">7.2.15 Update Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-15_Update_Bearer_Response"><span class="toc-number">2.12.</span> <span class="toc-text">7.2.15 Update Bearer Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-17-1_Delete_Bearer_Command"><span class="toc-number">2.12.1.</span> <span class="toc-text">7.2.17.1 Delete Bearer Command</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-17-2_Delete_Bearer_Failure_Indication"><span class="toc-number">2.12.2.</span> <span class="toc-text">7.2.17.2 Delete Bearer Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-18_Create_Indirect_Data_Forwarding_Tunnel_Request"><span class="toc-number">2.13.</span> <span class="toc-text">7.2.18 Create Indirect Data Forwarding Tunnel Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-10_Create_Indirect_Data_Forwarding_Tunnel_Response"><span class="toc-number">2.14.</span> <span class="toc-text">7.2.10 Create Indirect Data Forwarding Tunnel Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-20_void"><span class="toc-number">2.15.</span> <span class="toc-text">7.2.20 void</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-21_Release_Access_Bearers_Request"><span class="toc-number">2.16.</span> <span class="toc-text">7.2.21 Release Access Bearers Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-22_Release_Access_Bearers_Response"><span class="toc-number">2.17.</span> <span class="toc-text">7.2.22 Release Access Bearers Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-23_Stop_Paging_Indication"><span class="toc-number">2.18.</span> <span class="toc-text">7.2.23 Stop Paging Indication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-24_Modify_Access_Bearer_Request"><span class="toc-number">2.19.</span> <span class="toc-text">7.2.24 Modify Access Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-24_Modify_Access_Bearer_Response"><span class="toc-number">2.20.</span> <span class="toc-text">7.2.24 Modify Access Bearer Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#承载/会话元操作"><span class="toc-number">2.21.</span> <span class="toc-text">承载/会话元操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session消息也会包含关于bearer的信息:"><span class="toc-number">2.22.</span> <span class="toc-text">session消息也会包含关于bearer的信息:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bearer信令中更新session信息的情景："><span class="toc-number">2.23.</span> <span class="toc-text">bearer信令中更新session信息的情景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bearer_cause失败情景"><span class="toc-number">2.24.</span> <span class="toc-text">bearer cause失败情景</span></a></li></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#8_GTP-C_Information_Elements"><span class="toc-number"></span> <span class="toc-text">8 GTP-C Information Elements</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-21_Fully_Qulified_TEID(F-TEID)"><span class="toc-number">1.</span> <span class="toc-text">8.21 Fully Qulified TEID(F-TEID)</span></a></li></ol>
		</div>
		
		<h2 id="4-1_GTP_Tunnel">4.1 GTP Tunnel</h2>
<p>一个GTP隧道由一个TEID，一个ip地址和一个udp端口号标识。</p>
<p>GTPv2实体通过下列IE获取隧道相关的控制信息：</p>
<ul>
<li><p>Sender F-TEID for Control Plane IE</p>
</li>
<li><p>PGW S5/S8/S2a/ F-TEID for PMIP based interface or for GTP based Control Plane interface IE</p>
</li>
<li><p>MSG Server Sv TEID for Control Plane IE</p>
</li>
<li><p>S3/S16/S10 Address and TEID for Control Plane IE</p>
</li>
<li><p>MME/SGSN Sv TEID for Control Plane IE</p>
</li>
</ul>
<h3 id="S2a/S2b/S5/S8接口上的TEID-C">S2a/S2b/S5/S8接口上的TEID-C</h3>
<p>每个PDN连接的S2a，S2b，S5和S8接口上的TEID-C应该是不同的。与PDN连接有关的所有承载的控制消息共享同一隧道。S2a/S2b/S5/S8接口上的TEID-C将会释放，等到EPS承载全部被释放之后。    </p>
<h3 id="S3/S16/S10接口上的TEID-C">S3/S16/S10接口上的TEID-C</h3>
<p>在S3/S16/S10接口上，一个UE将只有一对TEID-Cs。同一个UE操作的控制消息将共享同一隧道。S3/S16/S10接口上的TEID-C将会释放，当对应UE上下文被删除或者UE去附载了。对于S3，I-RAT在ISR之间切换时，如果ISR激活，S3 TEID-C可能会被重新使用或者分配一个新的。在这种场景中，如果node决定分配新的额S3 TEID-C，node将会释放旧的S3 TEID-C。</p>
<h3 id="S11/S4上的TEID-C">S11/S4上的TEID-C</h3>
<p>UE在S11/S4上仅有一对TEID-C。UE操作的控制消息，共用同一个隧道。S11/S4上的TEID-C将会被释放，仅当所有相关的EPS承载被删除了。</p>
<h3 id="MBMS承载服务">MBMS承载服务</h3>
<p>一个MBMS仅有一对TEID-C，越过Sm-Sn接口。Sm-Sn接口上的TEID-C将会释放，当MBMS承载会话停止了。</p>
<h2 id="4-2_Protocol_stack">4.2 Protocol stack</h2>
<h3 id="4-2-0_General">4.2.0 General</h3>
<p>一个消息可以是Initail message,Triggered message,或者Triggered Replay message to Triggered message.</p>
<ul>
<li><p>Inital message，发送实体选择一个序列号发向GTP对端实体的消息</p>
</li>
<li><p>Triggered message，Inital message的回应</p>
</li>
<li><p>Triggered Replay message，Triggered message的回应</p>
</li>
</ul>
<p>通常Request message是一个Inital message，但是Request message也可以是一个Triggered message，当它被一个初始化命令消息触发时。</p>
<p>Piggybacking是可选的。</p>
<h3 id="4-2-1_UDP_header_and_port_numbers">4.2.1 UDP header and port numbers</h3>
<h4 id="4-2-1-1_Initial_Messages">4.2.1.1 Initial Messages</h4>
<p>目的端口应该是2123.</p>
<p>源端口是发送GTP实体本地分配的。如果GTPv2 GTP’v2模块使用同一个ip地址发送消息，应该保证源端口是不一样的。否则，ip层无法分发响应消息到正确的协议实体。</p>
<h4 id="4-2-1-2_Triggered_Messages">4.2.1.2 Triggered Messages</h4>
<p>目的/源端口应该是相应消息的源/目的端口，除了在使用SGSN池的场景。</p>
<p>在SGSN池场景，如果认证请求，上下文请求，或者挂起通知消息被另外一个池中的SGSN转发，认证响应，上下文响应或者挂起告之消息的UDP目的端口将有下面叙述的方式决定。</p>
<p>目的端口：copy信息元素-IE <code>UDP Source Port Number</code>（在相应的被转发的请求中）到UDP目的端口域。</p>
<p>源端口：发送端GTP实体本读分配。</p>
<h4 id="4-2-1-3_Piggybacked_Messages">4.2.1.3 Piggybacked Messages</h4>
<p>Piggybacked initial message是作为triggered reponse的串联发送的，他们共用同一个UDP头部。</p>
<p>| IP header | UDP header | Triggered response message(P=1) | Piggybacked initial message(P=0) |</p>
<h3 id="4-2-2_IP_header_and_IP_addresses">4.2.2 IP header and IP addresses</h3>
<h4 id="4-2-2-1_Initial_Messages">4.2.2.1 Initial Messages</h4>
<p>在网络服务恢复的过程中，如果一个MME/S4-SGSN发送了一个下行数据通知失败的指示消息给SGW，那么这个消息的目的IP地址将是SGW的地址，这个地址出现在下行数据通知消息中的F-TEID，或者之前下行通知消息的源地址。</p>
<h4 id="4-2-2-2_Triggered_Messages">4.2.2.2 Triggered Messages</h4>
<p>目的/源地址应该是相应消息的源/目的地址，除了在使用SGSN池的场景。</p>
<p>在SGSN池场景，如果认证请求，上下文请求，或者挂起通知消息被另外一个池中的SGSN转发，认证请求，上下文请求，挂起告知消息的IP源地址将由本地发送GTP实体分配。目的地址将有下列方式决定：在请求/通知消息中的信息元<code>Address for Control Plane</code>中，或者在信息元<code>S3/S16/S10 Address and TEID for Control Plane</code>中。</p>
<h4 id="4-2-2-3_Piggybacked_Messages">4.2.2.3 Piggybacked Messages</h4>
<p>和Triggered response message共用同一个IP头部。</p>
<h1 id="5-_GTP_Header_for_Control_Plane">5. GTP Header for Control Plane</h1>
<h2 id="5-1_General_format">5.1 General format</h2>
<h2 id="5-2_Control_Plane_GTP_Extension_Header">5.2 Control Plane GTP Extension Header</h2>
<p>原始的扩展头机制不再使用了，在GTP v2版本中。将来的扩展将通过在消息体中增加IE的方式实现。</p>
<h2 id="5-3_对于Echo_和Version不被支持的消息的GTP-C的头部">5.3 对于Echo 和Version不被支持的消息的GTP-C的头部</h2>
<ul>
<li><p>不包含TEID（T=0）</p>
</li>
<li><p>序号是任意值，而且应该被忽略，以一个空白字节结束</p>
</li>
</ul>
<h2 id="5-4_EPC指定的GTP-C头部">5.4 EPC指定的GTP-C头部</h2>
<ul>
<li><p>包含TEID（T=1）</p>
</li>
<li><p>包含正确的序号，以一个空白字节结束</p>
</li>
</ul>
<h2 id="5-5_GTPv2-C头部的用法">5.5 GTPv2-C头部的用法</h2>
<ul>
<li>Bit 5  是<code>P</code> 标志。piggybacked message自身的<code>P</code>标志将是0。如果一个<code>Create Session Response message</code>的<code>P</code>标志置位，那么这个piggybacked message将是<code>Create Bearer Requst</code>；<code>Create Bearer Response</code> —- <code>P</code> —- <code>Modify Bearer Request</code>。</li>
</ul>
<blockquote>
<p>只有当Create Session Response的P置位，Create Bearer Response的P才在同一个过程中置位。所有EPC指定的消息中，除了上面两个其他的P都被置成0。</p>
</blockquote>
<ul>
<li>3-4 octets 是消息长度域。这个长度包括GTP-C头部的必有部分（开始4个字节），但是TEID/序号包含在内。</li>
</ul>
<h3 id="5-5-2_TEID必须出现而且等于0的情形">5.5.2 TEID必须出现而且等于0的情形</h3>
<h2 id="5-6_Format_of_the_GTPv2-C_Message">5.6 Format of the GTPv2-C Message</h2>
<h1 id="6-_GTP-C_Message_Types_and_Message_Formats">6. GTP-C Message Types and Message Formats</h1>
<h3 id="6-1-0_Message_Type">6.1.0 Message Type</h3>
<h1 id="7_GTP-C_messages">7 GTP-C messages</h1>
<h2 id="7-1_Patch_Management_Messages">7.1 Patch Management Messages</h2>
<h3 id="7-1-0">7.1.0</h3>
<p>GTP-C的三个路径管理消息是：Echo Request,Echo Response, Version Not Supported Indication。</p>
<p>Echo过程的用法在23.007中指定。</p>
<h2 id="7-2_Tunnel_Management_Messages">7.2 Tunnel Management Messages</h2>
<h3 id="7-2-1_Create_Session_Request">7.2.1 Create Session Request</h3>
<p>MME/S4-SGSN -&gt; SGW -&gt; PGW</p>
<h3 id="7-2-2_Create_Session_Response">7.2.2 Create Session Response</h3>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<h3 id="7-2-3_Create_Bearer_Request">7.2.3 Create Bearer Request</h3>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<p>用于专有承载的激活</p>
<h3 id="7-2-4_Create_Bearer_Response">7.2.4 Create Bearer Response</h3>
<p>MME/S4-SGSN -&gt; SGW -&gt; PGW</p>
<h3 id="7-2-5_Bearer_Resource_Command">7.2.5 Bearer Resource Command</h3>
<p>MME/SGSN -&gt; SGW -&gt; PGW</p>
<p><code>Bearer Resource Command</code> UE发起的承载资源修改 -&gt; <code>Create/Update/Delete Bearer Request</code></p>
<h3 id="7-2-6_Bearer_Resource_Failure_Indication">7.2.6 Bearer Resource Failure Indication</h3>
<p>PGW -&gt; SGW -&gt; MME</p>
<h3 id="7-2-7_Modify_Bearer_Request">7.2.7 Modify Bearer Request</h3>
<p>MME/S4-SGSN -&gt; SGW -&gt; PGW</p>
<h3 id="7-2-8_Modify_Bearer_Response">7.2.8 Modify Bearer Response</h3>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<h4 id="7-2-9-1_Delete_Session_Request">7.2.9.1 Delete Session Request</h4>
<p>MME/S4-SGSN -&gt; SGW -&gt; PGW</p>
<h4 id="7-2-9-2_Delete_Bearer_Request">7.2.9.2 Delete Bearer Request</h4>
<p><code>Delete Bearer Request</code> 可以删除一个专有承载或者PDN地址上的所有承载，如果默认承载被去活了，那么PDN-GW去活PDN连接上所有的承载</p>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<h4 id="7-2-10-1_Delete_Session_Response">7.2.10.1 Delete Session Response</h4>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<h4 id="7-2-10-2_Delete_Bearer_Response">7.2.10.2 Delete Bearer Response</h4>
<p>MME/S4-SGSN -&gt; SGW -&gt; PGW</p>
<h4 id="7-2-11-1_Downlink_Data_Notification">7.2.11.1 Downlink Data Notification</h4>
<p>使用场景：</p>
<ul>
<li><p>在S11接口SGW -&gt; MME，作为网络端发起服务请求过程的一部分</p>
</li>
<li><p>在S4接口上SGW -&gt; S4-SGSN，作为SGW发起的Paging操作</p>
</li>
<li><p>在S4接口上SGW -&gt; S4-SGSN，重新建立之前释放的承载</p>
</li>
<li><p>在S11/S4接口上，SGW -&gt; MME/S4-SGSN,如果SGW接收到一个错误指示，来自eNodeB/RNC通过S1-U/S12接口</p>
</li>
<li><p>在S4接口上，SGW -&gt; S4-SGSN，当SGW接收到一个错误指示，来自S4-SGSN通过S4-U接口</p>
</li>
</ul>
<h4 id="7-2-11-2_Downlink_Data_Notification_Acknowledge">7.2.11.2 Downlink Data Notification Acknowledge</h4>
<h4 id="7-2-11-3_Downlink_Data_Notification_Failure_Indication">7.2.11.3 Downlink Data Notification Failure Indication</h4>
<p>MME/SGSN -&gt; SGW</p>
<h3 id="7-2-12_Delete_Indirect_Data_Forwarding_Tunnel_Request">7.2.12 Delete Indirect Data Forwarding Tunnel Request</h3>
<p>SGSG/MME -&gt; SGW，用于删除源/目的SGW之间的间接转发隧道。</p>
<h3 id="7-2-13_Delete_Indirect_Data_Forwarding_Tunnel_Response">7.2.13 Delete Indirect Data Forwarding Tunnel Response</h3>
<p>SGW -&gt; MME/SGSN </p>
<h4 id="7-2-14-1_Modify_Bearer_Command">7.2.14.1 Modify Bearer Command</h4>
<p>在S11接口，有MME发向SGW；或者在S5/S8接口，SGW到PGW。作为HSS初始化Qos更改的过程。</p>
<p><code>Modify Bearer Command</code> HSS 发起的承载QoS更改 -&gt; <code>Update Bearer Request</code></p>
<h4 id="7-2-14-2_Modify_Bearer_Failure_Indication">7.2.14.2 Modify Bearer Failure Indication</h4>
<h3 id="7-2-15_Update_Bearer_Request">7.2.15 Update Bearer Request</h3>
<p>MME/S4-SGSN &lt;- SGW &lt;- PGW</p>
<p>网络侧修改QoS等参数</p>
<h3 id="7-2-15_Update_Bearer_Response">7.2.15 Update Bearer Response</h3>
<p>MME/SGSN -&gt; SGW -&gt; PGW</p>
<h4 id="7-2-17-1_Delete_Bearer_Command">7.2.17.1 Delete Bearer Command</h4>
<p><code>Delete Bearer Command</code>    MME发起的承载去激活 -&gt; <code>Delete Bearer Request</code></p>
<p>eNB请求释放承载，或者MME发起的承载去活过程： MME -&gt; SGW -&gt; PGW</p>
<p>MS/SGSN发起在S4接口上的承载去活过程：S4-SGSN -&gt; SGW -&gt; PGW</p>
<h4 id="7-2-17-2_Delete_Bearer_Failure_Indication">7.2.17.2 Delete Bearer Failure Indication</h4>
<p>如果没有删除命令中的承载存在则会发回。</p>
<h3 id="7-2-18_Create_Indirect_Data_Forwarding_Tunnel_Request">7.2.18 Create Indirect Data Forwarding Tunnel Request</h3>
<h3 id="7-2-10_Create_Indirect_Data_Forwarding_Tunnel_Response">7.2.10 Create Indirect Data Forwarding Tunnel Response</h3>
<h3 id="7-2-20_void">7.2.20 void</h3>
<h3 id="7-2-21_Release_Access_Bearers_Request">7.2.21 Release Access Bearers Request</h3>
<p>S1的释放过程：MME -&gt; SGW</p>
<p>SGSN -&gt; SGW：</p>
<pre><code>-<span class="ruby"> <span class="constant">RAB</span>释放通过<span class="constant">S4</span>
</span>
-<span class="ruby"> <span class="constant">Iu</span>释放
</span>
-<span class="ruby"> <span class="constant">READY</span>到<span class="constant">STANDBY</span>转变</span>
</code></pre><h3 id="7-2-22_Release_Access_Bearers_Response">7.2.22 Release Access Bearers Response</h3>
<p><em>如果S1接口的承载释放后，ECM状态切换ECM-IDLE，如果要和恢复的话，下行是发paging，上行的话UE要发起service request流程。该流程会重建S1承载。</em></p>
<p>paging: <a href="http://www.gprshome.com/forum.php?mod=viewthread&amp;tid=2777" target="_blank" rel="external">http://www.gprshome.com/forum.php?mod=viewthread&amp;tid=2777</a></p>
<p>paging寻呼，其实就是23401中网络侧发起的service request，通过触发UE请求服务，完成整个过程。</p>
<p>23401-c40_5.3.4.3-P134.</p>
<h3 id="7-2-23_Stop_Paging_Indication">7.2.23 Stop Paging Indication</h3>
<p>在网络侧触发的服务请求过程中使用，由SGW到MME/SGSN。</p>
<h3 id="7-2-24_Modify_Access_Bearer_Request">7.2.24 Modify Access Bearer Request</h3>
<p>如果SGW、MME都支持MABR(8.83)特性，MME可能发送此消息到SGW的情况：</p>
<pre><code>- 当没有挂起的承载时，UE发起的服务请求

- 基于S1的没有SGW重分配的切换

- 基于X2的没有SGW重分配的切换

- <span class="keyword">...</span>
</code></pre><p>在ts23.401-P172中说此信息是不需要发给P-GW时候才发送的</p>
<h3 id="7-2-24_Modify_Access_Bearer_Response">7.2.24 Modify Access Bearer Response</h3>
<h3 id="承载/会话元操作">承载/会话元操作</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>	Create Session Request
	
	Delete Session Request
								
	Modify Bearer Request
		
	Modify Bearer Command   -------	Update Bearer Request
						   /
	Bearer Resource Command -------	Create Bearer Request
						   \
	Delete Bearer Command   -------	Delete Bearer Request
</pre></td></tr></table></figure>

<h3 id="session消息也会包含关于bearer的信息:">session消息也会包含关于bearer的信息:</h3>
<ul>
<li><p>初始附着，只有默认承载，create session response会包含SGW-U/PGW-U的信息，eNB收到attach accept后分配S1-U信息，通过Modfiy bearer request对默认承载确认。在Modify Bearer response中就不包含PGW-U的信息了，但可能包含SGW-U信息。可以认为在初始附着中，create session response与Modify Bearer request是默认承载的创建信令。</p>
</li>
<li><p>SGW重选的切换或TAU，会在create session request中包含要创建的上下文，response中包含创建了的承载上下文。说明SGW是根据此信息进行了承载的创建，但不确定是新的还是旧的eNB的承载消息。</p>
</li>
</ul>
<blockquote>
<p>而且可能是包行多个bearer信息，a list of bearer</p>
</blockquote>
<h3 id="bearer信令中更新session信息的情景：">bearer信令中更新session信息的情景：</h3>
<p>在SGW不重选情形中，左侧的控制信息可能通过Modify Bearer Request信息进行修改，造成了左侧信息单方面的更新。</p>
<h3 id="bearer_cause失败情景">bearer cause失败情景</h3>
<p>Bearer Context Created within Create Session Response: cause，According to 3GPP TS 23.401 [3] e.g. subclause 5.5.1.2.2 “S1-based handover, normal” and 3GPP TS 23.060 [35], during the handover procedure with an SGW change, except in the case of X2-handover (NOTE2 addresses X2 based HO with SGW change case), the target MME/S4-SGSN initiates the Create Session Request/Response and Modify Bearer Request/Response procedures one after the other. After receiving the “Bearer Context to be Created” IEs within Create Session Request message, the SGW may not accept some of these bearers. The SGW however shall return all bearers with the “Bearer Context Created” IEs within Create Session Response message (this table), but with different Cause values. Bearers that were not accepted by the SGW shall have an appropriate rejection value in the Cause IE. The target MME/S4-SGSN shall send these non-accepted bearers to the target SGW within the “Bearer Context to be removed” IE in a subsequent Modify Bearer Request message. Therefore, the SGW shall allocate the DL S5/S8 SGW F-TEIDs also for the non-accepted bearers. MME/S4-SGSN should remove all of the non-accepted bearers by separate procedures (e.g. an MME/S4-SGSN initiated Dedicated Bearer Deactivation procedure).</p>
<p>这里说，在基于S1切换时，SGW重选情形，将发送会话创建请求，SGW可能不会接收Bearer Context to Created的部分IE，但是将会都回复，只是cause值不同。MME/S4-SGSN将会把这些承载放到Bearer Context to be removed IE中发出Modify Bearer Request消息，因此SGW将会分配下行的S5/S8 SGW F-TEIDs给没有接受的承载MME/S4-SGSN将会通过后续的过程删除没有接受的承载(如 MME/S4-SGSN initiated Dedicated Bearer Deactivation procedure)。</p>
<p>即大体过程是：cause 失败 —- Modify Bearer Request（to be removed）—- Delete Bearer </p>
<p>MME/S4-SGSN initiated Dedicated Bearer Deactivation procedure是:<code>Delete Bearer Command ---&gt;</code>::<code>Delete Bearer Reqeust &lt;---</code></p>
<h1 id="8_GTP-C_Information_Elements">8 GTP-C Information Elements</h1>
<h2 id="8-21_Fully_Qulified_TEID(F-TEID)">8.21 Fully Qulified TEID(F-TEID)</h2>
<ol>
<li>S1-U eNodeB GTP-U interface</li>
<li>S1-U SGW GTP-U interface</li>
<li>S12 RNC GTP-U interface</li>
<li>S12 SGW GTP-U interface</li>
<li>S5/S8 SGW GTP-U interface</li>
<li>S5/S8 PGW GTP-U interface</li>
<li>S5/S8 SGW GTP-C interface</li>
<li>S5/S8 PGW GTP-C interface</li>
<li>S5/S8 SGW PMIPv6 interface (the 32 bit GRE key is encoded in 32 bit TEID field and since alternate CoA is not used the control plane and user plane addresses are the same for PMIPv6)</li>
<li>S5/S8 PGW PMIPv6 interface (the 32 bit GRE key is encoded in 32 bit TEID field (see subclause 6.3 in 3GPP TS 29.275 [26]) and the control plane and user plane addresses are the same for PMIPv6)</li>
<li>S11 MME GTP-C interface</li>
<li>S11/S4 SGW GTP-C interface</li>
<li>S10 MME GTP-C interface</li>
<li>S3 MME GTP-C interface</li>
<li>S3 SGSN GTP-C interface</li>
<li>S4 SGSN GTP-U interface</li>
<li>S4 SGW GTP-U interface</li>
<li>S4 SGSN GTP-C interface</li>
<li>S16 SGSN GTP-C interface</li>
<li>eNodeB GTP-U interface for DL data forwarding</li>
<li>eNodeB GTP-U interface for UL data forwarding</li>
<li>RNC GTP-U interface for data forwarding</li>
<li>SGSN GTP-U interface for data forwarding</li>
<li>SGW GTP-U interface for DL data forwarding</li>
<li>Sm MBMS GW GTP-C interface</li>
<li>Sn MBMS GW GTP-C interface</li>
<li>Sm MME GTP-C interface</li>
<li>Sn SGSN GTP-C interface</li>
<li>SGW GTP-U interface for UL data forwarding</li>
<li>Sn SGSN GTP-U interface</li>
<li>S2b ePDG GTP-C interface</li>
<li>S2b-U ePDG GTP-U interface</li>
<li>S2b PGW GTP-C interface</li>
<li>S2b-U PGW GTP-U interface</li>
<li>S2a TWAN GTP-U interface</li>
<li>S2a TWAN GTP-C interface</li>
<li>S2a PGW GTP-C interface</li>
<li>S2a PGW GTP-U interface</li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/3gpp/">3gpp</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2014/07/16/gtpv2/" data-title="gtpv2 | sqm&#39;s Blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/07/24/bootloader学习卡壳/" title="bootloader 卡壳">
  <strong>PREVIOUS:</strong><br/>
  <span>
  bootloader 卡壳</span>
</a>
</div>


<div class="next">
<a href="/2014/07/11/lte/"  title="lte">
 <strong>NEXT:</strong><br/> 
 <span>lte
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1_GTP_Tunnel"><span class="toc-number">1.</span> <span class="toc-text">4.1 GTP Tunnel</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#S2a/S2b/S5/S8接口上的TEID-C"><span class="toc-number">1.1.</span> <span class="toc-text">S2a/S2b/S5/S8接口上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#S3/S16/S10接口上的TEID-C"><span class="toc-number">1.2.</span> <span class="toc-text">S3/S16/S10接口上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#S11/S4上的TEID-C"><span class="toc-number">1.3.</span> <span class="toc-text">S11/S4上的TEID-C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MBMS承载服务"><span class="toc-number">1.4.</span> <span class="toc-text">MBMS承载服务</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2_Protocol_stack"><span class="toc-number">2.</span> <span class="toc-text">4.2 Protocol stack</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-0_General"><span class="toc-number">2.1.</span> <span class="toc-text">4.2.0 General</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1_UDP_header_and_port_numbers"><span class="toc-number">2.2.</span> <span class="toc-text">4.2.1 UDP header and port numbers</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-1_Initial_Messages"><span class="toc-number">2.2.1.</span> <span class="toc-text">4.2.1.1 Initial Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-2_Triggered_Messages"><span class="toc-number">2.2.2.</span> <span class="toc-text">4.2.1.2 Triggered Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-3_Piggybacked_Messages"><span class="toc-number">2.2.3.</span> <span class="toc-text">4.2.1.3 Piggybacked Messages</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2_IP_header_and_IP_addresses"><span class="toc-number">2.3.</span> <span class="toc-text">4.2.2 IP header and IP addresses</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-1_Initial_Messages"><span class="toc-number">2.3.1.</span> <span class="toc-text">4.2.2.1 Initial Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-2_Triggered_Messages"><span class="toc-number">2.3.2.</span> <span class="toc-text">4.2.2.2 Triggered Messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-3_Piggybacked_Messages"><span class="toc-number">2.3.3.</span> <span class="toc-text">4.2.2.3 Piggybacked Messages</span></a></li></ol></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#5-_GTP_Header_for_Control_Plane"><span class="toc-number"></span> <span class="toc-text">5. GTP Header for Control Plane</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1_General_format"><span class="toc-number">1.</span> <span class="toc-text">5.1 General format</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2_Control_Plane_GTP_Extension_Header"><span class="toc-number">2.</span> <span class="toc-text">5.2 Control Plane GTP Extension Header</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3_对于Echo_和Version不被支持的消息的GTP-C的头部"><span class="toc-number">3.</span> <span class="toc-text">5.3 对于Echo 和Version不被支持的消息的GTP-C的头部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4_EPC指定的GTP-C头部"><span class="toc-number">4.</span> <span class="toc-text">5.4 EPC指定的GTP-C头部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5_GTPv2-C头部的用法"><span class="toc-number">5.</span> <span class="toc-text">5.5 GTPv2-C头部的用法</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-2_TEID必须出现而且等于0的情形"><span class="toc-number">5.1.</span> <span class="toc-text">5.5.2 TEID必须出现而且等于0的情形</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6_Format_of_the_GTPv2-C_Message"><span class="toc-number">6.</span> <span class="toc-text">5.6 Format of the GTPv2-C Message</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#6-_GTP-C_Message_Types_and_Message_Formats"><span class="toc-number"></span> <span class="toc-text">6. GTP-C Message Types and Message Formats</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-0_Message_Type"><span class="toc-number">0.1.</span> <span class="toc-text">6.1.0 Message Type</span></a></li></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#7_GTP-C_messages"><span class="toc-number"></span> <span class="toc-text">7 GTP-C messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1_Patch_Management_Messages"><span class="toc-number">1.</span> <span class="toc-text">7.1 Patch Management Messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-0"><span class="toc-number">1.1.</span> <span class="toc-text">7.1.0</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2_Tunnel_Management_Messages"><span class="toc-number">2.</span> <span class="toc-text">7.2 Tunnel Management Messages</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1_Create_Session_Request"><span class="toc-number">2.1.</span> <span class="toc-text">7.2.1 Create Session Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2_Create_Session_Response"><span class="toc-number">2.2.</span> <span class="toc-text">7.2.2 Create Session Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3_Create_Bearer_Request"><span class="toc-number">2.3.</span> <span class="toc-text">7.2.3 Create Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4_Create_Bearer_Response"><span class="toc-number">2.4.</span> <span class="toc-text">7.2.4 Create Bearer Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-5_Bearer_Resource_Command"><span class="toc-number">2.5.</span> <span class="toc-text">7.2.5 Bearer Resource Command</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-6_Bearer_Resource_Failure_Indication"><span class="toc-number">2.6.</span> <span class="toc-text">7.2.6 Bearer Resource Failure Indication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-7_Modify_Bearer_Request"><span class="toc-number">2.7.</span> <span class="toc-text">7.2.7 Modify Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-8_Modify_Bearer_Response"><span class="toc-number">2.8.</span> <span class="toc-text">7.2.8 Modify Bearer Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-9-1_Delete_Session_Request"><span class="toc-number">2.8.1.</span> <span class="toc-text">7.2.9.1 Delete Session Request</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-9-2_Delete_Bearer_Request"><span class="toc-number">2.8.2.</span> <span class="toc-text">7.2.9.2 Delete Bearer Request</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-10-1_Delete_Session_Response"><span class="toc-number">2.8.3.</span> <span class="toc-text">7.2.10.1 Delete Session Response</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-10-2_Delete_Bearer_Response"><span class="toc-number">2.8.4.</span> <span class="toc-text">7.2.10.2 Delete Bearer Response</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-1_Downlink_Data_Notification"><span class="toc-number">2.8.5.</span> <span class="toc-text">7.2.11.1 Downlink Data Notification</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-2_Downlink_Data_Notification_Acknowledge"><span class="toc-number">2.8.6.</span> <span class="toc-text">7.2.11.2 Downlink Data Notification Acknowledge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-11-3_Downlink_Data_Notification_Failure_Indication"><span class="toc-number">2.8.7.</span> <span class="toc-text">7.2.11.3 Downlink Data Notification Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-12_Delete_Indirect_Data_Forwarding_Tunnel_Request"><span class="toc-number">2.9.</span> <span class="toc-text">7.2.12 Delete Indirect Data Forwarding Tunnel Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-13_Delete_Indirect_Data_Forwarding_Tunnel_Response"><span class="toc-number">2.10.</span> <span class="toc-text">7.2.13 Delete Indirect Data Forwarding Tunnel Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-14-1_Modify_Bearer_Command"><span class="toc-number">2.10.1.</span> <span class="toc-text">7.2.14.1 Modify Bearer Command</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-14-2_Modify_Bearer_Failure_Indication"><span class="toc-number">2.10.2.</span> <span class="toc-text">7.2.14.2 Modify Bearer Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-15_Update_Bearer_Request"><span class="toc-number">2.11.</span> <span class="toc-text">7.2.15 Update Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-15_Update_Bearer_Response"><span class="toc-number">2.12.</span> <span class="toc-text">7.2.15 Update Bearer Response</span></a></li><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-17-1_Delete_Bearer_Command"><span class="toc-number">2.12.1.</span> <span class="toc-text">7.2.17.1 Delete Bearer Command</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-17-2_Delete_Bearer_Failure_Indication"><span class="toc-number">2.12.2.</span> <span class="toc-text">7.2.17.2 Delete Bearer Failure Indication</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-18_Create_Indirect_Data_Forwarding_Tunnel_Request"><span class="toc-number">2.13.</span> <span class="toc-text">7.2.18 Create Indirect Data Forwarding Tunnel Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-10_Create_Indirect_Data_Forwarding_Tunnel_Response"><span class="toc-number">2.14.</span> <span class="toc-text">7.2.10 Create Indirect Data Forwarding Tunnel Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-20_void"><span class="toc-number">2.15.</span> <span class="toc-text">7.2.20 void</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-21_Release_Access_Bearers_Request"><span class="toc-number">2.16.</span> <span class="toc-text">7.2.21 Release Access Bearers Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-22_Release_Access_Bearers_Response"><span class="toc-number">2.17.</span> <span class="toc-text">7.2.22 Release Access Bearers Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-23_Stop_Paging_Indication"><span class="toc-number">2.18.</span> <span class="toc-text">7.2.23 Stop Paging Indication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-24_Modify_Access_Bearer_Request"><span class="toc-number">2.19.</span> <span class="toc-text">7.2.24 Modify Access Bearer Request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-24_Modify_Access_Bearer_Response"><span class="toc-number">2.20.</span> <span class="toc-text">7.2.24 Modify Access Bearer Response</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#承载/会话元操作"><span class="toc-number">2.21.</span> <span class="toc-text">承载/会话元操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session消息也会包含关于bearer的信息:"><span class="toc-number">2.22.</span> <span class="toc-text">session消息也会包含关于bearer的信息:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bearer信令中更新session信息的情景："><span class="toc-number">2.23.</span> <span class="toc-text">bearer信令中更新session信息的情景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bearer_cause失败情景"><span class="toc-number">2.24.</span> <span class="toc-text">bearer cause失败情景</span></a></li></ol></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#8_GTP-C_Information_Elements"><span class="toc-number"></span> <span class="toc-text">8 GTP-C Information Elements</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-21_Fully_Qulified_TEID(F-TEID)"><span class="toc-number">1.</span> <span class="toc-text">8.21 Fully Qulified TEID(F-TEID)</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/3gpp/" title="3gpp">3gpp<sup>2</sup></a></li>
		
			<li><a href="/tags/bootloader/" title="bootloader">bootloader<sup>1</sup></a></li>
		
			<li><a href="/tags/life/" title="life">life<sup>2</sup></a></li>
		
			<li><a href="/tags/link/" title="link">link<sup>1</sup></a></li>
		
			<li><a href="/tags/mips/" title="mips">mips<sup>1</sup></a></li>
		
			<li><a href="/tags/mips-asm/" title="mips asm">mips asm<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://yoursite.com" target="_blank" title="SunQingmeng">SunQingmeng</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
